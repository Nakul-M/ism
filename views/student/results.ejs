<style>
  body {
    margin: 0;
    padding: 0;
    background: #f5f5f5;
  }
  /* Marks table styling */
table {
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed; /* equal column widths */
}

table th, table td {
  padding: 8px;
  border: 1px solid #000;
  text-align: center;
  word-wrap: break-word;
}

table th {
  background: #000;
  color: #fff;
}

/* Wrap table in a scrollable container */
.table-container {
  width: 100%;
  overflow-x: auto;
}

/* Optional: shrink font & padding for mobile */
@media (max-width: 820px) {
  table {
    font-size: 12px;
    min-width: 700px; /* keep structure, enable scroll */
  }
  table th, table td {
    padding: 5px;
  }
}


  /* Default A4 styling for desktop */
  #result-content {
    width: 794px;   /* A4 width */
    min-height: 1123px;
    margin: 20px auto;
    padding: 30px;
    background: white;
    border: 1px solid #ccc;
    box-sizing: border-box;
  }

  /* Mobile override: shrink to screen size */
  @media (max-width: 820px) {
    #result-content {
      width: 100% !important;   /* force fit */
      min-height: auto !important;
      margin: 10px 0 !important;
      padding: 15px !important;
      border: none;             /* optional: remove border for mobile */
    }
  }

  /* Print: keep A4 size */
  @media print {
    body {
      margin: 0;
      padding: 0;
      overflow: hidden !important;
      -webkit-print-color-adjust: exact !important;
      print-color-adjust: exact !important;
    }

    body * {
      visibility: hidden;
    }

    #result-content, #result-content * {
      visibility: visible;
    }

    #result-content {
      position: absolute;
      left: 0;
      top: 0;
      width: 794px !important;
      height: 1123px !important;
      border: none !important;
      box-shadow: none !important;
      margin: 0 !important;
      padding: 30px !important;
    }
  }
</style>



<div id="result-content" style="width: 794px; height: 1100px; padding: 30px; margin: auto; font-family: 'Arial', sans-serif; background: white; border: 1px solid #ccc; box-sizing: border-box;">

  <!-- School Header -->
  <div style="text-align: center; margin-bottom: 20px;">
    <img src="https://shikshaniketanjk.in/wp-content/uploads/2020/07/LOGO-150x150.jpg" alt="School Logo" style="height: 70px;">
    <h2 style="margin: 5px 0;">Indra Shishu Mandir School</h2>
    <p style="margin: 0;">Affiliated to JKBOSE, Jammu | School Code: ******</p>
    <p style="margin: 0;">Nagrota Gujroo, Billawar ,184205</p>
    <hr style="margin-top: 15px; border-top: 2px solid black;">
    <h3 style="text-decoration: underline;">Report Card</h3>
  </div>

  <!-- Student Info -->
  <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
    <div style="width: 65%;">
      <p><strong>Name:</strong> <%= student.name %></p>
      <p><strong>Roll No:</strong> <%= student.rollNo %></p>
      <p><strong>Class:</strong> <%= student.class %></p>
      <p><strong>DOB:</strong> <%= student.dateOfBirth %></p>
      <p><strong>Parent Name:</strong> <%= student.parentName %></p>
    </div>
    <div style="width: 30%; text-align: center;">
      <img src="<%= student.photo%>" style="border: 1px solid #000; height: 120px; width: 90px; object-fit: cover;">
    </div>
  </div>

  <div class="table-container">
  <table>
    <thead>
      <tr>
        <th>Exam</th>
        <th>Math</th>
        <th>Science</th>
        <th>English</th>
        <th>Hindi</th>
        <th>Social</th>
        <th>Total</th>
      </tr>
    </thead>
    <tbody>
      <% Object.keys(marks).forEach(exam => {
        const m = marks[exam];
        const total = (m.math || 0) + (m.science || 0) + (m.english || 0) + (m.hindi || 0) + (m.social || 0);
      %>
        <tr>
          <td><%= exam %></td>
          <td><%= m.math ?? '-' %></td>
          <td><%= m.science ?? '-' %></td>
          <td><%= m.english ?? '-' %></td>
          <td><%= m.hindi ?? '-' %></td>
          <td><%= m.social ?? '-' %></td>
          <td><%= total %></td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</div>


  <!-- Attendance -->
  <div style="margin-bottom: 30px;">
    <p><strong>Total Days:</strong> 200</p>
    <p><strong>Days Present:</strong> <%= student.attendance || 185 %></p>
    <p><strong>Attendance %:</strong> <%= ((student.attendance || 185) / 200 * 100).toFixed(2) %>%</p>
    <p><strong>Remarks:</strong> Excellent</p>
  </div>

  <!-- Signatures -->
  <div style="display: flex; justify-content: space-between; margin-top: 50px;">
    <div>
      <p>_____________________</p>
      <p><strong>Class Teacher</strong></p>
    </div>
    <div>
      <p>_____________________</p>
      <p><strong>Principal</strong></p>
    </div>
  </div>

  <!-- Print Buttons -->
<div class="text-center mt-5 d-print-none">
<button onclick="window.print()" class="btn btn-primary">Print Report Card</button>

  <a href="/student/<%= student._id %>" class="btn btn-secondary ms-2">Back</a>
</div>

</div>
