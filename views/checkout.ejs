<!DOCTYPE html>
<html>
<head>
  <title>Checkout</title>
</head>
<body>
  <h2>Pay â‚¹500</h2>
  <button id="rzp-button">Pay Now</button>

  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <script>
    const button = document.getElementById('rzp-button');
    button.addEventListener('click', async () => {
      const res = await fetch('/payment/create-order', {
        method: 'PUT'
      });
      const order = await res.json();

      const options = {
        key: "<%= process.env.RAZORPAY_KEY_ID %>",
        amount: order.amount,
        currency: order.currency,
        name: "Test Company",
        description: "Test Transaction",
        order_id: order.id,
        handler: function (response) {
          alert("Payment successful!");
        },
        prefill: {
          name: "Your Name",
          email: "you@example.com",
        },
        theme: {
          color: "#3399cc",
        },
      };

      const rzp1 = new Razorpay(options);
      rzp1.open();
    });
  </script>
</body>
</html>
